<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skill Catalog - Reference Guide</title>
    <link rel="stylesheet" href="../assets/style.css">
    <style>
        body {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        .skill-group {
            margin-bottom: 40px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border-left: 4px solid #DAA520;
        }
        .skill-header {
            font-size: 1.5em;
            margin-bottom: 15px;
            color: #DAA520;
            font-weight: bold;
        }
        .skill-description {
            margin-bottom: 15px;
            color: #E8D5B7;
            font-style: italic;
        }
        .access-level {
            margin-top: 15px;
            padding: 10px;
            background: rgba(138, 115, 85, 0.2);
            border-radius: 4px;
        }
        .access-level h4 {
            color: #DAA520;
            margin-bottom: 8px;
            font-size: 1.1em;
        }
        .access-level p {
            color: #F5E6D3;
            margin: 5px 0;
        }
        .subgroup {
            margin-top: 20px;
            padding-left: 20px;
            border-left: 2px solid #8B7355;
        }
        .subgroup-header {
            font-size: 1.2em;
            color: #DAA520;
            margin-bottom: 10px;
        }
        h1 {
            color: #DAA520;
            border-bottom: 3px solid #DAA520;
            padding-bottom: 15px;
            margin-bottom: 30px;
        }
        .intro {
            margin-bottom: 30px;
            padding: 15px;
            background: rgba(212, 165, 116, 0.1);
            border-left: 3px solid #DAA520;
            color: #E8D5B7;
        }
    </style>
</head>
<body>
    <h1>Skill Catalog - Reference Guide</h1>
    
    <div class="intro">
        <p><strong>Note:</strong> This catalog lists all available skills and their access levels (Expert/Basic). Character-specific skill assignments are documented on individual character cards, not in this reference.</p>
        <p style="margin-top: 15px;"><strong>Skill Categories:</strong></p>
        <ul style="margin-top: 10px; padding-left: 20px;">
            <li><strong style="color: #DAA520;">üîë Key Skills</strong> - Essential to solving the mystery (botanical, spiritual, rumors)</li>
            <li><strong style="color: #8B7355;">üìö Secondary Skills</strong> - Helpful context and supplementary information (medical, legal, history)</li>
            <li><strong style="color: #DAA520;">üë• Personal</strong> - Family and personal history knowledge (personal_montrose, personal_crane, personal_romano, personal_whitmore, personal_sullivan)</li>
        </ul>
    </div>

    <div id="skills-container"></div>


    <div style="margin-top: 40px; padding: 20px; text-align: center; color: #8B7355;">
        <a href="../index.html" style="color: #DAA520; text-decoration: none;">‚Üê Return to Investigation</a>
    </div>

    <script>
        // Category color mapping
        const categoryColors = {
            'KEY': '#DAA520',
            'SECONDARY': '#8B7355',
            'PERSONAL': '#DAA520'
        };

        // Category label mapping
        const categoryLabels = {
            'KEY': 'KEY',
            'SECONDARY': 'SECONDARY',
            'PERSONAL': 'PERSONAL'
        };

        // Order skills by category (KEY first, then SECONDARY, then PERSONAL)
        function getCategoryOrder(category) {
            const order = { 'KEY': 1, 'SECONDARY': 2, 'PERSONAL': 3 };
            return order[category] || 99;
        }

        // Render a single skill group
        function renderSkill(skillKey, skillData) {
            const categoryColor = categoryColors[skillData.category] || '#DAA520';
            const categoryLabel = categoryLabels[skillData.category] || skillData.category;
            
            const enablesText = Array.isArray(skillData.enables) 
                ? skillData.enables.join(', ') 
                : skillData.enables;

            return `
                <div class="skill-group">
                    <div class="skill-header">${skillData.icon} ${skillData.title} <span style="color: ${categoryColor}; font-size: 0.7em; font-weight: normal;">[${categoryLabel}]</span></div>
                    <div class="skill-description">${skillData.description}</div>
                    <p style="color: #F5E6D3;">${enablesText}</p>
                    <div class="access-level">
                        <h4>‚≠ê Expert</h4>
                        <p>${skillData.expert.description}</p>
                    </div>
                    <div class="access-level">
                        <h4>üìñ Basic</h4>
                        <p>${skillData.basic.description}</p>
                    </div>
                </div>
            `;
        }

        // Load and render skills from JSON
        async function loadSkills() {
            try {
                const response = await fetch('../data/skills.json');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const skills = await response.json();
                
                const container = document.getElementById('skills-container');
                
                // Sort skills by category, then by name
                const sortedSkills = Object.entries(skills).sort(([keyA, dataA], [keyB, dataB]) => {
                    const categoryDiff = getCategoryOrder(dataA.category) - getCategoryOrder(dataB.category);
                    if (categoryDiff !== 0) return categoryDiff;
                    return dataA.title.localeCompare(dataB.title);
                });
                
                // Render each skill
                sortedSkills.forEach(([skillKey, skillData]) => {
                    container.innerHTML += renderSkill(skillKey, skillData);
                });
            } catch (error) {
                console.error('Error loading skills:', error);
                document.getElementById('skills-container').innerHTML = 
                    '<p style="color: #ff6b6b;">Error loading skills data. Please check the console for details.</p>';
            }
        }

        // Load skills when page loads
        document.addEventListener('DOMContentLoaded', loadSkills);
    </script>
</body>
</html>
